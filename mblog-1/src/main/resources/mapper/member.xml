<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo">
	<select id="getToday" resultType="string" parameterType="string">
		SELECT to_char(sysdate, 'YYYY-MM-DD') FROM dual
	</select>
	<select id="login" parameterType="map" resultType="string">
		SELECT MEM_NAME FROM MEMBER230324
		<where>
			<if test='mem_id!=null and mem_id.length()>0'>
				AND mem_id = #{mem_id}
			</if>
			<if test='mem_pw!=null and mem_pw.length()>0'>
				AND mem_pw = #{mem_pw}
			</if>
		</where>
	</select>

	<select id="memberList" parameterType="map" resultType="map">
		SELECT MEM_UID, MEM_NAME FROM MEMBER230324
		<where>
			<if test='mem_uid!=null and mem_uid.length()>0'>
				AND MEM_UID = #{mem_uid}
			</if>
<!--
	<input type=text id="mem_nickname" value=""/>
	항상 무조건 빈 문자열이다. 품전송하면 무조건 빈문자열이 있는 상태이다.
	아무것도 입력하지 않아도 null에 걸리지 않는다.
	문자열이 > 0 까지를 비교해야 잡아낼 수 있다.
-->			
			<if test='MEM_NICKNAME!=null and MEM_NICKNAME.length()>0'>
				AND MEM_NICKNAME = #{MEM_NICKNAME}
			</if>
		</where>
	</select>
	<insert id="memberInsert" parameterType="map">
		INSERT INTO
		MBLOG.MEMBER230324 (
		MEM_NO ,
		MEM_UID ,
		MEM_PW ,
		MEM_NAME ,
		MEM_NICKNAME ,
		MEM_EMAIL ,
		MEM_TEL ,
		MEM_GENDER ,
		MEM_BIRTHDAY,
		MEM_ZIPCODE,
		MEM_ADDR,
		MEM_ADDR_DTL
		)
		VALUES(
		SEQ_MEMBER_NO.NEXTVAL,
		#{mem_uid},
		#{mem_pw},
		#{mem_name},
		#{mem_nickname},
		#{mem_email},
		#{mem_tel},
		#{mem_gender},
		#{mem_birthday},
		#{mem_zipcode},
		#{mem_addr},
		#{mem_addr_dtl}
		)
	</insert>
</mapper>